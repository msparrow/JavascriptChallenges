
:root {
  --background-color: #111827; /* slate-900 */
  --text-color: #e5e7eb;       /* gray-200 */
  --primary-color: #3b82f6;    /* blue-500 */
  --border-color: #374151;     /* gray-700 */
  --success-color: #22c55e;    /* green-500 */
  --failure-color: #ef4444;    /* red-500 */
  --editor-bg: #0b1220;
  --toolbar-bg: #0b1220;
  --splitter-color: #1f2937;   /* gray-800 */
  --glossary-term-color: #ffffff; /* default for dark */
}

html[data-theme='light'] {
  --background-color: #f8fafc; /* slate-50 */
  --text-color: #0f172a;       /* slate-900 */
  --primary-color: #2563eb;    /* blue-600 */
  --border-color: #cbd5e1;     /* slate-300 */
  --success-color: #16a34a;    /* green-600 */
  --failure-color: #dc2626;    /* red-600 */
  --editor-bg: #ffffff;
  --toolbar-bg: #ffffff;
  --splitter-color: #e5e7eb;   /* gray-200 */
  --glossary-term-color: #000000; /* explicit black for light theme */
}

body {
  background-color: var(--background-color);
  color: var(--text-color);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  margin: 0;
}

.App { display: flex; flex-direction: column; min-height: 100vh; }

/* Top toolbar */
.toolbar {
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--toolbar-bg);
  border-bottom: 1px solid var(--border-color);
  padding: 0 12px;
  gap: 12px;
}
.app-title { color: var(--text-color); }
.toolbar-right { display: flex; align-items: center; gap: 12px; }
.theme-toggle {
  background: transparent; border: 1px solid var(--border-color);
  border-radius: 8px; color: var(--text-color); cursor: pointer;
  padding: 4px 8px; font-size: 14px;
}
.theme-toggle:hover { border-color: var(--primary-color); }
.kbd-hints { opacity: 0.65; display: none; gap: 8px; }
@media (min-width: 900px) { .kbd-hints { display: inline-flex; } }

/* Main layout */
.layout {
  display: grid;
  grid-template-columns: var(--lesson-width, 26%) 6px minmax(0, 1fr) 6px var(--preview-width, 26%);
  grid-template-rows: minmax(0, 1fr);
  gap: 0;
  height: calc(100vh - 48px);
  width: 100%;
}

.splitter {
  background: var(--splitter-color);
  cursor: col-resize;
}
.splitter:focus { outline: 2px solid var(--primary-color); outline-offset: -2px; }

.lesson-pane { padding: 1rem 1.25rem; border-right: 1px solid var(--border-color); overflow: auto; }
.lesson-pane h1 { color: var(--primary-color); }

.editor-pane { display: flex; flex-direction: column; background-color: var(--editor-bg); }
.editor-scroll { flex: 1 1 auto; min-height: 0; }

.editor-actions { display: flex; }

.run-button, .reset-button {
  flex: 1;
  padding: 0.8rem 1rem;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  border-top: 1px solid var(--border-color);
}

.run-button { background-color: var(--primary-color); }
.run-button:hover { background-color: #2563eb; }

.reset-button { background-color: #4f4f4f; }
.reset-button:hover { background-color: #666; }

.preview-pane { border-left: 1px solid var(--border-color); }
.preview-pane iframe { width: 100%; height: 100%; border: none; background-color: #fff; }
.sidebar-header { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); }
.sidebar-header h2 { margin: 0; font-size: 1.1rem; color: var(--text-color); }
.sidebar-body { height: calc(100% - 48px); overflow: auto; padding: 0.5rem 0.75rem; }

/* Hidden runner iframe */
.runner-iframe { position: absolute; width: 0; height: 0; border: 0; clip: rect(0 0 0 0); }

.navigation-controls { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
.navigation-buttons { display: flex; justify-content: space-between; }

.lesson-dropdown {
  width: 100%;
  padding: 0.6rem;
  background-color: var(--background-color);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 1rem;
}
.lesson-dropdown:focus { outline: none; border-color: var(--primary-color); }

.navigation-buttons button {
  padding: 0.6rem 1.2rem;
  border: 1px solid var(--primary-color);
  background-color: transparent;
  color: var(--primary-color);
  cursor: pointer;
  border-radius: 4px;
}
.navigation-buttons button:disabled { opacity: 0.5; cursor: not-allowed; }
.navigation-buttons button:hover:not(:disabled) { background-color: var(--primary-color); color: white; }

.challenge-actions { margin-top: 1.5rem; }
.hint-button { background-color: transparent; border: 1px solid var(--primary-color); color: var(--primary-color); padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
.hint-button:hover { background-color: var(--primary-color); color: white; }

.hint-box { margin-top: 1rem; padding: 1rem; background-color: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 4px; }

.result { margin-top: 1.5rem; padding: 1rem; border-radius: 4px; }
.result.success { border: 1px solid var(--success-color); background-color: rgba(34, 197, 94, 0.1); color: var(--success-color); }
.result.failure { border: 1px solid var(--failure-color); background-color: rgba(239, 68, 68, 0.1); color: var(--failure-color); }

.status-pane { display: flex; justify-content: center; align-items: center; height: calc(100vh - 48px); font-size: 1.25rem; }
.error-pane { color: var(--failure-color); }

/* CodeMirror styles */
.cm-editor .cm-gutters { background-color: var(--editor-bg); border-right: 1px solid var(--border-color); }
.cm-editor .cm-line:nth-child(2n) { background-color: rgba(255, 255, 255, 0.03); }

/* Test details list */
.test-details { margin-top: 0.5rem; list-style: none; padding-left: 0; }
.test-details li { padding: 4px 0; }
.test-details li.passed { color: var(--success-color); }
.test-details li.failed { color: var(--failure-color); }

/* Floating Glossary button */
.glossary-fab {
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 1000;
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: 0.6rem 1rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.glossary-fab:hover { background-color: #2563eb; }

/* Modal styles */
.modal-backdrop { position: fixed; inset: 0; background-color: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 1100; }
.modal { width: min(800px, 90vw); max-height: 80vh; background-color: #222; color: var(--text-color); border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
.modal-header { display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); }
.modal-close { background: transparent; border: none; color: var(--text-color); font-size: 1.5rem; cursor: pointer; }
.modal-body { padding: 1rem; overflow: auto; }
.glossary-list .glossary-item { border-bottom: 1px solid var(--border-color); }
.glossary-header { width: 100%; display: flex; align-items: center; justify-content: space-between; background: transparent; border: none; color: var(--text-color); text-align: left; padding: 0.75rem 0.25rem; cursor: pointer; }
.glossary-header .term { color: var(--glossary-term-color); font-weight: 600; }
.chevron { transition: transform 0.2s ease; }
.chevron.rot { transform: rotate(180deg); }
.glossary-content { padding: 0 0.25rem 0.75rem 0.25rem; }
.glossary-content .definition { opacity: 0.9; margin: 0.25rem 0 0.5rem; }
.code-block { background: #111; border: 1px solid var(--border-color); border-radius: 6px; padding: 0.75rem; overflow: auto; }
.code-block pre { margin: 0; }
.code-block, .code-block pre, .code-block code { color: #ffffff; }

/* Responsive adjustments */
@media (max-width: 1200px) {
  .layout { grid-template-columns: 30% 6px minmax(0, 1fr) 6px 24%; }
}
@media (max-width: 900px) {
  .layout {
    grid-template-columns: 1fr;
    grid-template-rows: auto 6px minmax(0, 50vh) 6px minmax(0, 40vh);
  }
  .lesson-pane { border-right: none; border-bottom: 1px solid var(--border-color); }
  .preview-pane { border-left: none; border-top: 1px solid var(--border-color); }
  .splitter { height: 6px; width: 100%; cursor: row-resize; }
}
